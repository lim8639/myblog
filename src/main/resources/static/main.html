<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>沫沫的时光机</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="asset/css/frame.css">
    <link rel="stylesheet" href="asset/css/index.css">
    <link rel="stylesheet" href="asset/bootstrap-3.3.7-dist/css/bootstrap.css">
    <script src="asset/bootstrap-3.3.7-dist/jquery/jquery-3.5.1.min.js"></script>
    <script src="asset/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="asset/js/jquery.cookie.js"></script>
    <script>
        var token = $.cookie('token');
        var page_id =window.location.hash;
        $(function () {
            if (page_id=="")
            {
                showPage("#page_index");
            }else {
                showPage("#page_id");
            }
            showPage("#page_reading")
        })
        function checkUser() {
            if (token==""||token==undefined||token==null){
                showPage("#page_login");
                return login();
            }
        }
        function showPage(id) {
            //
            $('.page').css('display','none');
            $(id).css('display','block');
        }
    </script>
</head>
<body>
<section class="header_nav ">
    <nav class="container">
        <div id="index" class="nav_logo_text">
            <a id="page_index_id" href="#index">沫沫的时光机</a>
            <script>
                $("#page_index_id").click(function () {
                    showPage("#page_index");
                })
            </script>
        </div>
        <ul class="nav_ul hidden-sm hidden-xs">
            <li class="visible-sm visible-xs"><a href="#">博客中心</a></li>
            <li class=""><a href="webapi/web.html">网站说明</a></li>
            <li><a href="webapi/api.html">api说明</a></li>
            <li><a href="personal/myweb.html">页面管理</a></li>
            <li><a href="markdown/manage.html">文章管理</a></li>
            <li><a href="webapi/email.html">邮件系统</a></li>
        </ul>
        <div id="page_user_id1"   class="nav_user_mine"  bind_page="#page_user">
            <a href="#page_user_id1"  id="page_user_id">用户中心</a>
        </div>
    </nav>
</section>
<div id="page_index" class="page">
    <section class="header_banner">
        <img class="header_banner_img" src="asset/img/hello.png" alt="helloworld">
    </section>
    <section id="lists_container" class="main_content">
        <div class="main_content_title">
            <h2><span class="title_leave glyphicon glyphicon-send" style="top: 2px"></span> START:DASH!!</h2>
        </div>
        <div class="main_show">
            <div class="show_img col-lg-4 col-md-4 col-sm-6 col-xs-6">
                <div class="show_img_content"></div>
            </div>
            <div class="show_img col-lg-4 col-md-4 col-sm-6 col-xs-6">
                <div class="show_img_content" style="background-image:url('asset/img/79898357_p0.png');"></div>
            </div>
            <div class="show_img col-lg-4 col-md-4 hidden-sm hidden-xs">
                <div class="show_img_content" style="background-image:url('asset/img/83592061_p0.jpg');"></div>
            </div>
        </div>

        <div class="main_content_title">
            <h2><span class=" title_leave glyphicon glyphicon-leaf" style="top: 2px"></span> Discovery</h2>
        </div>
        <div class="main_list">
            <div class="item">
                <div class="item_img">
                </div>
                <div class="item_txt">
                    <div class="post-content">
                        <div class="post-date">
                            <i class="glyphicon glyphicon-time" style="top: 2px">

                            </i>发布于 2019-12-31
                        </div>
                        <a href="https://2heng.xin/2019/12/31/graphql-recursion/" class="post-title">
                            <h3>GraphQL 实现递归查询</h3>
                        </a><div class="post-meta">
                        <span><i style="top: 2px"  class="glyphicon glyphicon-eye-open"></i>11,724 热度</span>
                        <span class="comments-number">
                                    <i style="top: 2px" class="glyphicon glyphicon-comment"></i>
                                <a href="#">43 条评论</a>
                         </span>
                        <span>
                             <i  style="top: 2px" class="glyphicon glyphicon-folder-open">

                             </i><a href="https://2heng.xin/archives/hacking/">
                             野生技术协会</a>
                         </span>
                    </div>
                        <div class="float-content">
                            <p>当我们需要用 GraphQL 查询多层套嵌的数据，比如像 WordPress 这样套嵌的评论信息时，通常的写法是： { posts(first: 100)</p>
                            <div class="post-bottom">
                                <a href="#" class="button-normal">
                                    <i class="iconfont icon-caidan"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="main_list">
            <div class="item">
                <div class="item_img">
                </div>
                <div class="item_txt">
                    <div class="post-content">
                        <div class="post-date">
                            <i class="glyphicon glyphicon-time" style="top: 2px">

                            </i>发布于 2019-12-31
                        </div>
                        <a href="https://2heng.xin/2019/12/31/graphql-recursion/" class="post-title">
                            <h3>GraphQL 实现递归查询</h3>
                        </a><div class="post-meta">
                        <span><i style="top: 2px"  class="glyphicon glyphicon-eye-open"></i>11,724 热度</span>
                        <span class="comments-number">
                                    <i style="top: 2px" class="glyphicon glyphicon-comment"></i>
                                <a href="#">43 条评论</a>
                         </span>
                        <span>
                             <i  style="top: 2px" class="glyphicon glyphicon-folder-open">

                             </i><a href="https://2heng.xin/archives/hacking/">
                             野生技术协会</a>
                         </span>
                    </div>
                        <div class="float-content">
                            <p>当我们需要用 GraphQL 查询多层套嵌的数据，比如像 WordPress 这样套嵌的评论信息时，通常的写法是： { posts(first: 100)</p>
                            <div class="post-bottom">
                                <a href="#" class="button-normal">
                                    <i class="iconfont icon-caidan"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            // $(function () {
            //     $.get("/markdownlist","json",function (data) {
            //         for( var key in data ){
            //             var lists = "   <div class=\"main_list\">\n" +
            //                 "        <div class=\"item\">\n" +
            //                 "            <div style=\"background-image: url(\""+data[key].cover+"\")\" class=\"item_img\">\n" +
            //                 "            </div>\n" +
            //                 "            <div class=\"item_txt\">\n" +
            //                 "                <div class=\"post-content\">\n" +
            //                 "                    <div class=\"post-date\">\n" +
            //                 "                        <i class=\"glyphicon glyphicon-time\" style=\"top: 2px\">\n" +
            //                 "\n" +
            //                 "                        </i>发布于 "+data[key].fristTime+"\n" +
            //                 "                    </div>\n" +
            //                 "                    <a href=\"https://2heng.xin/2019/12/31/graphql-recursion/\" class=\"post-title\">\n" +
            //                 "                        <h3>"+data[key].title+"</h3>\n" +
            //                 "                    </a><div class=\"post-meta\">\n" +
            //                 "                    <span><i style=\"top: 2px\"  class=\"glyphicon glyphicon-eye-open\"></i>11,724 热度</span>\n" +
            //                 "                    <span class=\"comments-number\">\n" +
            //                 "                                    <i style=\"top: 2px\" class=\"glyphicon glyphicon-comment\"></i>\n" +
            //                 "                                <a href=\"#\">43 条评论</a>\n" +
            //                 "                         </span>\n" +
            //                 "                    <span>\n" +
            //                 "                             <i  style=\"top: 2px\" class=\"glyphicon glyphicon-folder-open\">\n" +
            //                 "\n" +
            //                 "                             </i><a href=\"https://2heng.xin/archives/hacking/\">\n" +
            //                 "                             野生技术协会</a>\n" +
            //                 "                         </span>\n" +
            //                 "                </div>\n" +
            //                 "                    <div class=\"float-content\">\n" +
            //                 "                        <p>"+data[key].content+"</p>\n" +
            //                 "                        <div class=\"post-bottom\">\n" +
            //                 "                            <a href=\"#\" class=\"button-normal\">\n" +
            //                 "                                <i class=\"iconfont icon-caidan\"></i>\n" +
            //                 "                            </a>\n" +
            //                 "                        </div>\n" +
            //                 "                    </div>\n" +
            //                 "                </div>\n" +
            //                 "            </div>\n" +
            //                 "        </div>\n" +
            //                 "    </div>";
            //             // alert(lists);
            //             $('#lists_container').append(lists);
            //         }
            //     })
            // })
        </script>
    </section>
</div>
<div id="page_login" class="page">
    <link rel="stylesheet" href="asset/css/check/login.css">
    <script src="asset/js/jquery.cookie.js"></script>
    <script type="text/javascript" charset="utf-8" src="//g.alicdn.com/sd/ncpc/nc.js?t=2015052012"></script>
    <section class="login">
        <div class="container">
            <div class="login_box">
                <h2>Login</h2>
                <div class="login_box_form">
                    <form>
                        <div class="text">
                            <label for="username">Username:</label>
                            <input id="username" class="form-control" type="text" name="username" placeholder="Username">
                        </div>
                        <div class="form-group">
                            <label for="password">Password:</label>
                            <input type="password"  class="form-control" id="password" placeholder="Password">
                        </div>
                        <div class="form-group">
                            <div id="your-dom-id" class="nc-container text"></div> <!--No-Captcha渲染的位置，其中 class 中必须包含 nc-container-->
                        </div>
                        <button type="button" id="login_btn" class="btn btn-default form-control">Submit</button>
                        <div class="text" style="padding-top: 5px">
                            <span id="message" style="color: red"></span>
                        </div>
                    </form>
                    <script>
                        var block =0;
                        function login() {
                            $("#login_btn").click(function () {
                                var u1 = $("#username").val();
                                var p1 = $("#password").val();
                                if((u1==""||u1==null)||(p1==""||p1=="")){
                                    $("#message").html("账户或者密码不能为空");
                                    return false;
                                }
                                if (block==0){
                                    $("#message").html("滑块未验证");
                                    return  false;
                                }
                                alert("正在登陆");
                                $.ajax({
                                    type: "POST",
                                    url: "/login",
                                    async: false,
                                    data: {username:u1,password:p1},
                                    dataType: "json",
                                    // headers: {
                                    //     Authorization:token
                                    // },
                                    success: function(data) {
                                        if (data.code==1){
                                           return true;
                                        }else{
                                            $("#message").html(data.message);
                                        }
                                    },
                                    error: function(e){
                                        $("#message").html(e);
                                        return false;
                                    }
                                });
                            })
                        }
                        //https://blog.csdn.net/veesing/article/details/88290441?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control
                        var nc_token = ["CF_APP_1", (new Date()).getTime(), Math.random()].join(':');
                        var NC_Opt =
                            {
                                renderTo: "#your-dom-id",
                                appkey: "CF_APP_1",
                                scene: "register",
                                token: nc_token,
                                customWidth: 260,
                                trans:{"key1":"code0"},
                                elementID: ["usernameID"],
                                is_Opt: 0,
                                language: "cn",
                                isEnabled: true,
                                timeout: 3000,
                                times:5,
                                apimap: {
                                    // 'analyze': '//a.com/nocaptcha/analyze.jsonp',
                                    // 'get_captcha': '//b.com/get_captcha/ver3',
                                    // 'get_captcha': '//pin3.aliyun.com/get_captcha/ver3'
                                    // 'get_img': '//c.com/get_img',
                                    // 'checkcode': '//d.com/captcha/checkcode.jsonp',
                                    // 'umid_Url': '//e.com/security/umscript/3.2.1/um.js',
                                    // 'uab_Url': '//aeu.alicdn.com/js/uac/909.js',
                                    // 'umid_serUrl': 'https://g.com/service/um.json'
                                },
                                callback: function (data) {
                                    window.console && console.log(nc_token)
                                    window.console && console.log(data.csessionid)
                                    window.console && console.log(data.sig)
                                    block = 1;
                                }
                            }
                        var nc = new noCaptcha(NC_Opt)
                        nc.upLang('cn', {
                            _startTEXT: "请按住滑块，拖动到最右边",
                            _yesTEXT: "验证通过",
                            _error300: "哎呀，出错了，点击<a href=\"javascript:__nc.reset()\">刷新</a>再来一次",
                            _errorNetwork: "网络不给力，请<a href=\"javascript:__nc.reset()\">点击刷新</a>",
                        })
                    </script>
                </div>
            </div>
        </div>
    </section>
</div>
<div id="page_user" class="page">
    <section>
        <div class="container">
            <h2>节点用户记录</h2>
            <table class="table tab-content">
                <thead>
                <tr>
                    <th>秘钥</th>
                    <th>用户</th>
                    <th>访问ip</th>
                    <th>时间</th>
                    <th>设备</th>
                    <th>次数</th>
                    <th>地址</th>
                </tr>
                </thead>
                <tbody id="tbody">
                </tbody>
            </table>
            <script>
                $("#page_user_id").click(function () {
                    checkUser();
                    $.ajax({
                        url:"/private/v4",
                        dataType:"json",
                        headers:{
                            Authorization:$.cookie("token")
                        },
                        success:function (data) {
                            if (data.code==0){
                                alert(data.message);
                            }
                            var  $body = $('#tbody')
                            $body.html('');
                            for( var key in data ){
                                $body.append(
                                    " <tr> " +
                                    "            <td>"+data[key].token+"    </td>\n" +
                                    "            <td>"+data[key].mark+"    </td>\n" +
                                    "            <td>"+data[key].host+"    </td>\n" +
                                    "            <td>"+data[key].lastimes+"</td>\n" +
                                    "            <td>"+data[key].agent+"   </td>\n" +
                                    "            <td>"+data[key].times+"   </td>\n" +
                                    "            <td>"+data[key].address+" </td>"   +
                                    "</tr>");
                            }
                            showPage("#page_user");
                        }
                    })
                })
                $(function () {
                    function getQueryVariable(variable)
                    {
                        var query = window.location.search.substring(1);
                        var vars = query.split("&");
                        for (var i=0;i<vars.length;i++) {
                            var pair = vars[i].split("=");
                            if(pair[0] == variable){return pair[1];}
                        }
                        return(false);
                    }

                });
            </script>
        </div>
    </section>
</div>
<div id="page_editor" class="page">

</div>
<div id="page_reading" class="page container">
<section>
    <div id="sidebar">
        <h1>Table of Contents</h1>
        <div class="markdown-body editormd-preview-container" id="custom-toc-container">#custom-toc-container</div>
    </div>
    <div id="markdown_view">
        <textarea style="display:none;" name="test-editormd-markdown-doc">###Hello world!</textarea>
    </div>
    <script src="asset/editor.md-master/lib/marked.min.js"></script>
    <script src="asset/editor.md-master/lib/prettify.min.js"></script>
    <script src="asset/editor.md-master/lib/raphael.min.js"></script>
    <script src="asset/editor.md-master/lib/underscore.min.js"></script>
    <script src="asset/editor.md-master/lib/sequence-diagram.min.js"></script>
    <script src="asset/editor.md-master/lib/flowchart.min.js"></script>
    <script src="asset/editor.md-master/lib/jquery.flowchart.min.js"></script>
    <script src="asset/editor.md-master/editormd.js"></script>
    <script type="text/javascript">
        $(function() {
            var testEditormdView;
            $.get("/test_md",function (data) {
                testEditormdView = editormd.markdownToHTML("markdown_view", {
                    markdown        : data ,//+ "\r\n" + $("#append-test").text(),
                    //htmlDecode      : true,       // 开启 HTML 标签解析，为了安全性，默认不开启
                    htmlDecode      : "style,script,iframe",  // you can filter tags decode
                    //toc             : false,
                    tocm            : true,    // Using [TOCM]
                    tocContainer    : "#custom-toc-container", // 自定义 ToC 容器层
                    //gfm             : false,
                    //tocDropdown     : true,
                    // markdownSourceCode : true, // 是否保留 Markdown 源码，即是否删除保存源码的 Textarea 标签
                    emoji           : true,
                    taskList        : true,
                    tex             : true,  // 默认不解析
                    flowChart       : true,  // 默认不解析
                    sequenceDiagram : true,  // 默认不解析
                });
            })

        });
    </script>
</section>
</div>
<section>
    <link rel="stylesheet" href="asset/APlayer-master/dist/APlayer.min.css">
    <script src="asset/APlayer-master/dist/APlayer.min.js"></script>
    <script src="asset/js/MetingJs.js"></script>
    <meting-js
            server="netease"
            type="playlist"
            id="6599591833">
    </meting-js>
</section>
<section class="page_footer">
    <div class="footer">
        <p><span style="top: 2px" class="glyphicon glyphicon-copyright-mark"></span>版权所有@copyright</p>
        <p>技术支持: <a style="color: #9e69d7" href="http://bootcss.com">Bootstrap</a> | <a style="color: #7dc664" href="https://spring.io/">SpringBoot</a></p>
        <p>2021.01.24</p>
    </div>
</section>
</body>
</html>